<script>
  window.vaadin = window.vaadin || {};
  vaadin.elements = vaadin.elements || {};
  vaadin.elements.grid = vaadin.elements.grid || {};

  /**
   * @polymerBehavior vaadin.elements.grid.FilterBehavior
   */
  vaadin.elements.grid.FilterBehavior = {
    properties: {

      _filters: {
        type: Array,
        value: function() {
          return [];
        }
      },
      /**
       * If `true`, a filter icon will appear, which can be used to set filters for each column in the grid.
       */
       customFilter: {
        type: Boolean,
        value: false,
        reflectToAttribute: true
      }

    },

    listeners: {
      'filter-changed': '_filterChanged'
    },

    _filterChanged: function(e) {
      if (!this.customFilter && this._filters.indexOf(e.target) === -1) {
        this._filters.push(e.target);
      }

      e.stopPropagation();

      if (this.dataProvider) {
        this.clearCache();
      }
    },

    _mapFilters: function() {
      return this.customFilter ? this._filters : this._filters.map(function(filter) {
        return {
          path: filter.path,
          value: filter.value
        };
      });
    },
  };
</script>
